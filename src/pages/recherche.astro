---
import Layout from '../layouts/Layout.astro';
import Search from "astro-pagefind/components/Search";
---

<Layout>
  <section class="py-12 max-w-4xl mx-auto">
    <header class="mb-12">
      <h1 class="text-4xl md:text-5xl font-black tracking-tighter mb-4" style="color: var(--text-title);">
        Rechercher <span class="text-purple-500">.</span>
      </h1>
      <p style="color: var(--text-main);">
        Trouvez un projet, une technologie ou une problématique technique spécifique parmi mes documentations.
      </p>
    </header>
    
    <div class="search-page-container">
      <Search 
        id="search" 
        className="pagefind-custom-full"
        uiOptions={{ 
          placeholder: "Active Directory, GPO, PfSense, Docker...", 
          showImages: false 
        }} 
      />
    </div>
  </section>
</Layout>

<style is:global>
  :root {
    --pagefind-ui-primary: #9333ea; /* Ton violet */
    --pagefind-ui-text: var(--text-main);
    --pagefind-ui-background: var(--card-bg);
    --pagefind-ui-border: var(--card-border);
    --pagefind-ui-font: inherit;
  }

  .pagefind-custom-full .pagefind-ui__search-input {
    background-color: var(--card-bg) !important;
    border: 1px solid var(--card-border) !important;
    padding: 15px 15px 15px 50px !important;
    border-radius: 16px !important;
    color: var(--text-title) !important;
    transition: all 0.3s ease !important;
    font-weight: 600 !important;
  }

  /* Focus : On passe du jaune au violet */
  .pagefind-custom-full .pagefind-ui__search-input:focus {
    border-color: #9333ea !important;
    box-shadow: 0 0 0 4px rgba(147, 51, 234, 0.1) !important;
  }

  /* Surlignage (Mark) : Plus élégant en violet léger */
  mark {
    background-color: rgba(147, 51, 234, 0.2) !important;
    color: #9333ea !important;
    padding: 0 2px;
    border-radius: 4px;
    font-weight: bold;
  }

  [data-theme='dark'] mark {
    color: #d8b4fe !important; /* purple-300 pour le mode sombre */
    background-color: rgba(168, 85, 247, 0.3) !important;
  }

  /* Résultats */
  .pagefind-ui__result {
    background: var(--card-bg) !important;
    border: 1px solid var(--card-border) !important;
    padding: 1.5rem !important;
    border-radius: 20px !important;
    margin-bottom: 1.5rem !important;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
    list-style-type: none !important;
  }

  .pagefind-ui__result:hover {
    transform: scale(1.01) translateX(8px);
    border-color: #9333ea !important;
    box-shadow: 0 10px 30px -15px rgba(0, 0, 0, 0.1) !important;
  }

  .pagefind-ui__result-link {
    color: var(--text-title) !important;
    font-size: 1.25rem !important;
    font-weight: 800 !important;
    text-decoration: none !important;
  }

  .pagefind-ui__result-link:hover {
    color: #9333ea !important;
  }

  /* Suppression des puces de liste par défaut de Pagefind */
  .pagefind-ui__results-list {
    padding: 0 !important;
  }
</style>