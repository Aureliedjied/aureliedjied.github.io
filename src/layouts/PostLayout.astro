---
// src/layouts/PostLayout.astro
import Layout from './Layout.astro';
const { frontmatter } = Astro.props;
const accentColor = frontmatter?.color || '#a855f7';
---

<Layout title={frontmatter?.title}>
  <div id="scroll-progress-container" class="fixed top-0 left-0 w-full h-[3px] z-[1000] bg-transparent pointer-events-none">
    <div 
      id="scroll-progress-bar" 
      class="h-full w-0 transition-all duration-150 ease-out"
      style={`background-color: ${accentColor}; box-shadow: 0 0 10px ${accentColor}88;`}
    ></div>
  </div>

  <slot />

  <script>
    const updateProgressBar = () => {
      const progressBar = document.getElementById('scroll-progress-bar');
      if (!progressBar) return;
      const winScroll = document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      progressBar.style.width = scrolled + "%";
    };
    window.addEventListener('scroll', updateProgressBar);
  </script>
</Layout>