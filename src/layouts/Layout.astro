---
import '../styles/global.css';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<html lang="fr" class="w-full overflow-x-hidden">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg.png" />
        <title>Aurélie Djied | Portfolio</title>
        <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
        <script is:inline>
            const theme = (() => {
                if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
                    return localStorage.getItem('theme');
                }
                if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                    return 'dark';
                }
                return 'dark';
            })();
            
            document.documentElement.setAttribute('data-theme', theme);
        </script>
    </head>
    
    <body class="min-h-screen flex flex-col w-full overflow-x-hidden relative">
        <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none w-full">
            <div class="absolute top-[-10%] left-[-10%] h-[600px] w-[600px] rounded-full blur-[120px] opacity-50 dark:opacity-100" 
                style="background-color: var(--bg-glow-1);"></div>
            <div class="absolute bottom-[0%] right-[-5%] h-[500px] w-[500px] rounded-full blur-[120px] opacity-30 dark:opacity-100" 
                style="background-color: var(--bg-glow-2);"></div>
        </div>
        
        <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full flex-grow pt-8 relative">
            <Header />
            <slot />
        </main>

        <Footer />

        <button id="to-top" class="fixed bottom-6 right-6 p-3 rounded-full bg-purple-600 text-white shadow-lg opacity-0 translate-y-10 transition-all duration-300 hover:scale-110 z-[100]">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"></path></svg>
        </button>

        <script>
            const toTopBtn = document.getElementById('to-top');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 400) {
                    toTopBtn?.classList.remove('opacity-0', 'translate-y-10');
                } else {
                    toTopBtn?.classList.add('opacity-0', 'translate-y-10');
                }
            });
            toTopBtn?.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        </script>
    </body>
</html>

<style is:global>
    /* Reset des styles globaux et polices */
    html { 
        font-family: 'Inter', system-ui, sans-serif; 
        scroll-behavior: smooth; 
        background-color: var(--bg-color);
    }

    /* Animation fluide lors du changement de thème */
    body {
        background-color: var(--bg-color);
        color: var(--text-main);
    }

    /* Configuration des variables Pagefind (pour ta page /recherche) */
    :root { 
        --pagefind-ui-primary: #a855f7; 
        --pagefind-ui-text: var(--text-main);
        --pagefind-ui-background: var(--card-bg);
        --pagefind-ui-border: var(--card-border);
    }

    /* Customisation de la sélection de texte */
    ::selection {
        background-color: rgba(168, 85, 247, 0.3);
        color: var(--text-title);
    }
</style>