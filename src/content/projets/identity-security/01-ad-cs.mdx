---
title: "PKI : DÃ©ploiement du rÃ´le AD CS"
description: "Mise en place dâ€™une autoritÃ© de certification dâ€™entreprise pour Ã©tablir la confiance numÃ©rique au sein du domaine."
tags: ["Active Directory", "SÃ©curitÃ©", "Windows Server"]
category: "windows-server"
serie: "identity-security"
serieOrder: 2
pubDate: 2026-01-24
slug: "ad-cs"
---

import SeriesStepper from '../../../components/SeriesStepper.astro';
import NextStep from '../../../components/NextStep.astro';



Lâ€™**Active Directory Certificate Services (AD CS)** constitue la fondation de la confiance numÃ©rique dâ€™un environnement Windows.  
Dans cette Ã©tape du lab, lâ€™objectif nâ€™est pas seulement dâ€™installer une autoritÃ© de certification, mais de poser une **racine de confiance propre, maÃ®trisÃ©e et durcie**, capable de supporter les futurs besoins : authentification forte, LDAPS, chiffrement des services et authentification machine.

Le dÃ©ploiement d'une **PKI (Public Key Infrastructure)** est donc abordÃ© ici avec une logique de **sÃ©curitÃ©, de traÃ§abilitÃ© et de moindre privilÃ¨ge**.

---

## ğŸ—ï¸ Ã‰tape 1 : Installer le rÃ´le

Je commence par ajouter le rÃ´le **Services de certificats Active Directory**. Lâ€™objectif est de rester sur une installation strictement nÃ©cessaire Ã  la fonction d'AutoritÃ© de Certification (CA).

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">
  
  <div class="space-y-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/install-adcs.png" alt="Installation du rÃ´le AD CS" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">SÃ©lection du rÃ´le racine AD CS</p>
  </div>

<div class="space-y-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/install-ca.png" alt="Installation minimale" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Installation minimale : CA uniquement</p>
  </div>

</div>

<div class="flex items-center gap-4 p-4 bg-amber-50 dark:bg-amber-500/5 border-l-4 border-amber-400 rounded-r-xl my-8">
  <span class="text-2xl">â—</span>
  <p class="text-xs text-amber-900 dark:text-amber-200 font-medium">
    <strong>RÃ¨gle d'or :</strong> Une autoritÃ© de certification ne doit jamais changer de nom ou de domaine aprÃ¨s son dÃ©ploiement, sous peine de rendre tous les certificats Ã©mis invalides.
  </p>
</div>
---

## ğŸ” Ã‰tape 2 : Configuration de l'AutoritÃ© Racine

Je dÃ©ploie une **AutoritÃ© de certification dâ€™entreprise racine**, intÃ©grÃ©e Ã  lâ€™Active Directory. Ce choix stratÃ©gique permet d'automatiser la distribution des certificats via l'**auto-enrÃ´lement** (GPO).

### Durcissement Cryptographique
Pour garantir une sÃ©curitÃ© Ã  long terme, j'ai configurÃ© des paramÃ¨tres supÃ©rieurs aux standards actuels :

<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 my-8">
  <div class="p-4 bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl">
    <div class="flex items-center gap-2 mb-2">
      <span class="text-blue-600 font-bold">ğŸ’</span>
      <h4 class="bg-amber-500/20 text-amber-400 p-2 rounded-lg text-xs font-bold">>ClÃ© RSA 4096 bits</h4>
    </div>
    <p class="text-[10px] text-slate-600 dark:text-white/60 leading-relaxed">Doublement de la taille standard pour une rÃ©sistance accrue au bruteforce.</p>
  </div>
  
  <div class="p-4 bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl">
    <div class="flex items-center gap-2 mb-2">
      <span class="text-blue-600 font-bold">ğŸ”’</span>
      <h4 class="bg-amber-500/20 text-amber-400 p-2 rounded-lg text-xs font-bold">>Hachage SHA512</h4>
    </div>
    <p class="text-[10px] text-slate-600 dark:text-white/60 leading-relaxed">Utilisation d'un algorithme de hachage de pointe, au-delÃ  du SHA256 standard.</p>
  </div>
</div>


<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/adcs-4.png" alt="ClÃ© privÃ©e" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">CrÃ©ation d'une nouvelle clÃ© privÃ©e sÃ©curisÃ©e.</p>
  </div>
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/adcs-fin.png" alt="RÃ©sumÃ© final" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Confirmation de la configuration rÃ©ussie</p>
  </div>
</div>

---

## ğŸ›¡ï¸ Ã‰tape 3 : Segmenter lâ€™administration de la PKI (Moindre privilÃ¨ge)

Administrer une PKI avec un compte **Domain Admin** crÃ©erait un point de compromission critique.  
Je mets donc en place une **identitÃ© dâ€™exploitation dÃ©diÃ©e** : **`adm-pki`**.

---

### ğŸ‘¤ CrÃ©ation du compte dâ€™administration PKI

Le compte est isolÃ© dans une OU dÃ©diÃ©e aux comptes dâ€™administration : <code class="px-2 py-0.5 bg-slate-100 dark:bg-white/10 rounded text-blue-700 dark:text-blue-300 font-mono text-xs">00_ADMINS > PKI</code>. Il est utilisÃ© uniquement pour lâ€™exploitation quotidienne.

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki.png" alt="CrÃ©ation du compte adm-pki" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">CrÃ©ation du compte adm-pki dÃ©diÃ©</p>
  </div>
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki2.png" alt="OU PKI" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Isolation dans l'OU d'administration</p>
  </div>
</div>

---

### ğŸ“œ Gestion du groupe "Editeurs de certificats"

Le groupe **Ã‰diteurs de certificats** permet de publier les certificats dans lâ€™annuaire. Par dÃ©faut, le compte machine du serveur possÃ¨de ces droits. J'ai choisi un modÃ¨le plus strict :

<div class="my-8 grid grid-cols-1 sm:grid-cols-2 gap-4">
  <div class="p-4 bg-red-50 dark:bg-red-500/5 border border-red-100 dark:border-red-500/20 rounded-xl text-center">
    <span class="text-red-500 font-bold text-lg">ğŸ”»</span>
    <p class="text-[10px] font-black uppercase text-red-800 dark:text-red-400 mt-2">Retrait</p>
    <p class="text-[10px] text-slate-600 dark:text-white/60 italic">Compte machine SRV-AD-01$</p>
  </div>
  <div class="p-4 bg-green-50 dark:bg-green-500/5 border border-green-100 dark:border-green-500/20 rounded-xl text-center">
    <span class="text-green-500 font-bold text-lg">â•</span>
    <p class="text-[10px] font-black uppercase text-green-800 dark:text-green-400 mt-2">Ajout</p>
    <p class="text-[10px] text-slate-600 dark:text-white/60 italic">IdentitÃ© nominative adm-pki</p>
  </div>
</div>

ğŸ‘‰ Cette approche amÃ©liore la **traÃ§abilitÃ©** : chaque publication en AD est liÃ©e Ã  une identitÃ© humaine et non Ã  un service automatique. 

Depuis la console <code class="text-xs font-mono">certsrv.msc</code>, j'ai dÃ©lÃ©guÃ© uniquement les droits nÃ©cessaires : **Lire** et **Ã‰mettre/GÃ©rer des certificats**.

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki3.png" alt="Membres du groupe" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Restriction des Certificate Publishers</p>
  </div>
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki-cert.png" alt="Permissions CA" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">DÃ©lÃ©gation granulaire des droits</p>
  </div>
</div>

---

### ğŸ” SÃ©paration des rÃ´les dâ€™administration

Pour respecter le modÃ¨le de **Tiering**, j'ai dÃ©fini une frontiÃ¨re claire entre exploitation et architecture :

<div class="overflow-hidden rounded-2xl border my-8" 
     style="background-color: var(--card-bg); border-color: var(--card-border); shadow: var(--card-shadow);">
  <table class="w-full text-[11px] text-left border-collapse">
    <thead>
      <tr class="border-b" 
          style="background-color: rgba(0,0,0,0.02); border-color: var(--card-border);">
        <th class="p-4 font-black uppercase" style="color: var(--text-title)">RÃ´le</th>
        <th class="p-4 font-black uppercase" style="color: var(--text-title)">PÃ©rimÃ¨tre adm-pki</th>
      </tr>
    </thead>
    <tbody class="divide-y" style="border-color: var(--card-border)">
      <tr class="transition-colors hover:bg-slate-50/50 dark:hover:bg-white/5">
        <td class="p-4 font-bold" style="color: var(--text-title)">Exploitation</td>
        <td class="p-4">
          <span class="px-2 py-1 rounded-md font-bold bg-green-100 dark:bg-green-500/10 text-green-700 dark:text-green-400">
            âœ… AutorisÃ© (Ã‰mission, RÃ©vocation, Suivi)
          </span>
        </td>
      </tr>
      <tr class="transition-colors hover:bg-slate-50/50 dark:hover:bg-white/5">
        <td class="p-4 font-bold" style="color: var(--text-title)">Architecture</td>
        <td class="p-4">
          <span class="px-2 py-1 rounded-md font-bold bg-red-100 dark:bg-red-500/10 text-red-700 dark:text-red-400">
            âŒ Interdit (ModÃ¨les sensibles, HiÃ©rarchie)
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<div class="flex items-start gap-4 p-5 bg-blue-50 dark:bg-blue-500/5 border-r-4 border-blue-500 rounded-l-xl my-8">
  <span class="text-xl">ğŸ¯</span>
  <p class="text-xs text-slate-800 dark:text-blue-100/80 leading-relaxed font-medium">
    Cette sÃ©paration rÃ©duit lâ€™impact dâ€™une compromission et sâ€™aligne avec les bonnes pratiques Tier 0 de sÃ©curisation Active Directory.
  </p>
</div>

## ğŸ” Ã‰tape 4 : Activer lâ€™audit 

Une PKI sans journalisation fiable constitue un angle mort de sÃ©curitÃ©.  
Jâ€™active donc lâ€™audit des Ã©vÃ©nements de lâ€™autoritÃ© de certification en modifiant la GPO **DOM - S - Advanced_Auditing** pour activer lâ€™option " Auditer les services de certifications " :


AprÃ¨s application, la sous-catÃ©gorie **Services de certification** passe bien en **SuccÃ¨s et Ã‰chec**, que l'on peut vÃ©rifier directement via powershell.

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/audit-cert.png" alt="Membres du groupe Ã‰diteurs de certificats" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Auditer les succÃ¨s et Ã©checs.</p>
  </div>
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/audit-pwshell-ok.png" alt="Permissions de la CA" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">VÃ©rification de l'audit avec la commande auditpol /get</p>
  </div>
</div>
---

## ğŸ§¬ Ã‰tape 5 : VÃ©rifier la publication de la PKI dans Active Directory

MÃªme sans crÃ©er de modÃ¨le personnalisÃ©, une autoritÃ© de certification **Enterprise** publie automatiquement des informations dans lâ€™annuaire.

Jâ€™utilise **ADSI Edit** pour vÃ©rifier que le **certificat de lâ€™autoritÃ© de certification** est bien publiÃ© dans la partition de configuration dâ€™Active Directory.

Chemin observÃ© :
`CN=Configuration â†’ CN=Services â†’ CN=Public Key Services â†’ CN=Certification Authorities`

La prÃ©sence de cet objet confirme que :
- la CA est correctement intÃ©grÃ©e Ã  Active Directory  
- les machines du domaine peuvent rÃ©cupÃ©rer le certificat racine automatiquement  
- la chaÃ®ne de confiance peut Ãªtre construite sans action manuelle

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 700px;">
    <img src="/images/projets/identity-security/ad-cs/cert-ad-inscrit.png" alt="Publication du certificat de la CA dans ADSI" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 8px; font-style: italic;">Le certificat de lâ€™autoritÃ© de certification est bien publiÃ© dans Active Directory.</p>
  </div>
</div>

Cette vÃ©rification confirme que lâ€™infrastructure PKI est correctement ancrÃ©e dans lâ€™annuaire avant de passer aux Ã©tapes suivantes.

---

## âœ… Ã‰tape 6 : VÃ©rifier la santÃ© de la PKI

Pour terminer, jâ€™utilise **PKIView (`pkiview.msc`)** afin de contrÃ´ler :

- la hiÃ©rarchie de certification  
- la validitÃ© des certificats dâ€™autoritÃ©  
- la disponibilitÃ© des points **AIA** et **CDP**

Tous les indicateurs sont au vert : la chaÃ®ne de confiance est fonctionnelle et les points de distribution sont accessibles.

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 450px;">
    <img src="/images/projets/identity-security/ad-cs/pki-ok.png" alt="PKIview" style="width: 130%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Emplacement AIA et CDP du certificat OK</p>
  </div>
</div>


---

## ğŸ§© Ã‰tape 7 : VÃ©rification locale via la console MMC

Une fois la PKI validÃ©e, je vÃ©rifie que le **certificat racine** est bien ancrÃ© dans le magasin de lâ€™ordinateur local. C'est ce qui permet au serveur (et plus tard aux clients) de faire confiance aux certificats Ã©mis.

### ğŸ”§ AccÃ¨s au magasin systÃ¨me
Pour inspecter les certificats de lâ€™ordinateur local, j'utilise la console `mmc.exe` en ajoutant le composant logiciel enfichable **Certificats**.

<div class="grid grid-cols-2 md:grid-cols-4 gap-4 my-8">
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc1.png" alt="MMC 1" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">1. Lancer MMC</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc2.png" alt="MMC 2" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">2. Composants</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc3.png" alt="MMC 3" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">3. Compte Ordinateur</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc4.png" alt="MMC 4" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">4. Local</p>
  </div>
</div>

---

### ğŸ” Validation du certificat racine

Dans le magasin <code class="text-xs font-mono">AutoritÃ©s de certification racines de confiance â†’ Certificats</code>, le certificat de mon autoritÃ© dâ€™entreprise apparaÃ®t bien. 

Cette prÃ©sence confirme que :
- La CA est reconnue par le systÃ¨me d'exploitation.
- Le certificat racine est approuvÃ© localement.
- La chaÃ®ne de confiance est prÃªte pour les services applicatifs (LDAPS, VPN, etc.).

<div class="my-10 flex flex-col items-center">
  <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl shadow-sm">
    <img src="/images/projets/identity-security/ad-cs/mmc5.png" alt="Certificat racine visible dans MMC" class="rounded-xl w-full max-w-3xl h-auto" />
  </div>
  <p class="mt-4 text-[10px] font-black uppercase tracking-widest text-slate-500 dark:text-white/40 italic">
    Le certificat est bien prÃ©sent et valide dans le magasin de confiance local.
  </p>
</div>

---

<section class="mt-16 space-y-12">
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-slate-50 dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl p-8 shadow-sm">
    <div>
      <h3 class="text-xl font-black mb-4 flex items-center gap-2 text-slate-900 dark:text-white">
        <span class="text-green-500 text-lg">âœ…</span> Bilan de l'Ã©tape : AD CS
      </h3>
      <ul class="space-y-3">
        <li class="flex items-start gap-3 text-sm text-slate-700 dark:text-white/80">
          <span><strong>Confiance Ã©tablie :</strong> Racine RSA 4096 / SHA512 dÃ©ployÃ©e avec succÃ¨s.</span>
        </li>
        <li class="flex items-start gap-3 text-sm text-slate-700 dark:text-white/80">
          <span><strong>SÃ©curitÃ© :</strong> RÃ´les sÃ©parÃ©s entre exploitation (adm-pki) et architecture (Tier 0).</span>
        </li>
        <li class="flex items-start gap-3 text-sm text-slate-700 dark:text-white/80">
          <span><strong>SantÃ© validÃ©e :</strong> AIA/CDP opÃ©rationnels et certificat visible dans le magasin local.</span>
        </li>
      </ul>
    </div>
    
    <div class="hidden md:flex justify-center border-l border-slate-200 dark:border-white/10 pl-8 text-center">
       <div>
          <div class="text-4xl mb-2">ğŸ“œ</div>
          <p class="text-[10px] uppercase tracking-widest font-black text-slate-900 dark:text-white/60">Brique de confiance prÃªte</p>
          <p class="text-[9px] text-slate-500 mt-1 italic">Flux critiques Ã  sÃ©curiser</p>
       </div>
    </div>
  </div>

  <div class="max-w-2xl mx-auto text-center space-y-6 px-4">
    <p class="text-base leading-relaxed text-slate-800 dark:text-white/90 italic">
      "La PKI interne est dÃ©sormais opÃ©rationnelle, segmentÃ©e et auditÃ©e. Elle constitue la fondation nÃ©cessaire pour transformer notre annuaire en un service LDAPS chiffrÃ©."
    </p>
    
    <div class="space-y-4">
      <p class="text-sm text-slate-500 dark:text-white/50">
        Objectif suivant : SÃ©curiser les Ã©changes d'annuaire ( LDAPS ).
      </p>
    </div>
  </div>

</section>

<NextStep 
  href="/projets/ldaps" 
  title="SÃ©curiser les Ã©changes d'annuaire" 
/>