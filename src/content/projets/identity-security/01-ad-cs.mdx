---
title: "PKI : D√©ploiement du r√¥le AD CS"
description: "Mise en place d‚Äôune autorit√© de certification d‚Äôentreprise pour √©tablir la confiance num√©rique au sein du domaine."
tags: ["Active Directory", "S√©curit√©", "Windows Server"]
category: "windows-server"
serie: "identity-security"
serieOrder: 2
pubDate: 2026-01-24
slug: "ad-cs"
---

import SeriesStepper from '../../../components/SeriesStepper.astro';
import NextStep from '../../../components/NextStep.astro';



L‚Äô**Active Directory Certificate Services (AD CS)** constitue la fondation de la confiance num√©rique d‚Äôun environnement Windows.  
Dans cette √©tape du lab, l‚Äôobjectif n‚Äôest pas seulement d‚Äôinstaller une autorit√© de certification, mais de poser une **racine de confiance propre, ma√Ætris√©e et durcie**, capable de supporter les futurs besoins : authentification forte, LDAPS, chiffrement des services et authentification machine.

Le d√©ploiement d'une **PKI (Public Key Infrastructure)** est donc abord√© ici avec une logique de **s√©curit√©, de tra√ßabilit√© et de moindre privil√®ge**.

---

## üèóÔ∏è √âtape 1 : Installer le r√¥le

Je commence par ajouter le r√¥le **Services de certificats Active Directory**. L‚Äôobjectif est de rester sur une installation strictement n√©cessaire √† la fonction d'Autorit√© de Certification (CA).

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">
  
  <div class="space-y-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/install-adcs.png" alt="Installation du r√¥le AD CS" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">S√©lection du r√¥le racine AD CS</p>
  </div>

<div class="space-y-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/install-ca.png" alt="Installation minimale" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Installation minimale : CA uniquement</p>
  </div>

</div>

<div class="flex items-center gap-4 p-4 bg-amber-50 dark:bg-amber-500/5 border-l-4 border-amber-400 rounded-r-xl my-8">
  <span class="text-2xl">‚ùó</span>
  <p class="text-xs text-amber-900 dark:text-amber-200 font-medium">
    <strong>R√®gle d'or :</strong> Une autorit√© de certification ne doit jamais changer de nom ou de domaine apr√®s son d√©ploiement, sous peine de rendre tous les certificats √©mis invalides.
  </p>
</div>
---

## üîê √âtape 2 : Configuration de l'Autorit√© Racine

Je d√©ploie une **Autorit√© de certification d‚Äôentreprise racine**, int√©gr√©e √† l‚ÄôActive Directory. Ce choix strat√©gique permet d'automatiser la distribution des certificats via l'**auto-enr√¥lement** (GPO).

### Durcissement Cryptographique
Pour garantir une s√©curit√© √† long terme, j'ai configur√© des param√®tres sup√©rieurs aux standards actuels :

<div class="grid grid-cols-1 sm:grid-cols-2 gap-4 my-8">
  <div style="background-color: var(--card-bg); border: 1px solid var(--card-border);" class="p-5 rounded-2xl shadow-sm transition-transform hover:scale-[1.02]">
    <div class="flex items-center gap-3 mb-3">
      <span class="text-xl">üíé</span>
      <h4 style="color: #f59e0b;" class="text-[10px] font-black uppercase tracking-tighter bg-amber-500/10 px-2 py-1 rounded-md">Cl√© RSA 4096 bits</h4>
    </div>
    <p style="color: var(--text-main);" class="text-[11px] leading-relaxed">Doublement de la taille standard pour une r√©sistance accrue au bruteforce et une long√©vit√© de la racine √©tendue.</p>
  </div>
  
  <div style="background-color: var(--card-bg); border: 1px solid var(--card-border);" class="p-5 rounded-2xl shadow-sm transition-transform hover:scale-[1.02]">
    <div class="flex items-center gap-3 mb-3">
      <span class="text-xl">üîí</span>
      <h4 style="color: #f59e0b;" class="text-[10px] font-black uppercase tracking-tighter bg-amber-500/10 px-2 py-1 rounded-md">Hachage SHA512</h4>
    </div>
    <p style="color: var(--text-main);" class="text-[11px] leading-relaxed">Utilisation d'un algorithme de hachage de pointe, garantissant l'int√©grit√© des certificats √©mis face aux attaques collisionnelles.</p>
  </div>
</div>


<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/adcs-4.png" alt="Cl√© priv√©e" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Cr√©ation d'une nouvelle cl√© priv√©e s√©curis√©e.</p>
  </div>
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/adcs-fin.png" alt="R√©sum√© final" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Confirmation de la configuration r√©ussie</p>
  </div>
</div>

---

## üõ°Ô∏è √âtape 3 : Segmenter l‚Äôadministration de la PKI (Moindre privil√®ge)

Administrer une PKI avec un compte **Admins du Domaine** cr√©erait un point de compromission critique.  
Je mets donc en place une **identit√© d‚Äôexploitation d√©di√©e** : **`adm-pki`**.

---

### üë§ Cr√©ation du compte d‚Äôadministration PKI

Le compte est isol√© dans une OU d√©di√©e, sans privil√®ges : <code class="px-2 py-0.5 bg-slate-100 dark:bg-white/10 rounded text-blue-700 dark:text-blue-300 font-mono text-xs">00_ADMINS > PKI</code>. Il est utilis√© uniquement pour l‚Äôexploitation de la CA. Il fera parti plus tard d'un groupe

<div class="grid grid-cols-1 md:grid-cols-2 gap-6 my-10">
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki.png" alt="Cr√©ation du compte adm-pki" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Cr√©ation du compte adm-pki d√©di√©</p>
  </div>
  <div class="flex flex-col gap-3">
    <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
      <img src="/images/projets/identity-security/ad-cs/adm-pki2.png" alt="OU PKI" class="rounded-lg w-full h-auto" />
    </div>
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Pas de privil√®ges accord√©s ici</p>
  </div>
</div>

---

### üìú Gestion du groupe "Editeurs de certificats"

Afin de renforcer la s√©curit√© de l‚Äôinfrastructure <strong>AD CS</strong>, j‚Äôai mis en place une strat√©gie combinant tra√ßabilit√© compl√®te et d√©l√©gation ma√Ætris√©e des privil√®ges.


#### üìù Activation compl√®te de l‚Äôaudit

Depuis les <strong>propri√©t√©s de la CA</strong>, onglet <em>Audit</em>, j‚Äôai activ√© l‚Äôensemble des cat√©gories disponibles afin d‚Äôassurer une journalisation exhaustive des actions sensibles :


<div style="display: flex; justify-content: center; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 500px;">
    <img src="/images/projets/identity-security/ad-cs/audit-ca.png" alt="Audit complet activ√© sur la CA" class="rounded-lg w-full h-auto" />
  <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Toutes les cat√©gories d‚Äôaudit sont activ√©es afin de garantir une tra√ßabilit√© compl√®te</p>
  </div>
</div>

<p class="mt-4">
Cette configuration permet de garantir qu‚Äôaucune action administrative sur la CA ne puisse √™tre effectu√©e sans laisser de trace exploitable dans les journaux de s√©curit√©.
</p>



#### üîê D√©l√©gation ma√Ætris√©e des droits sur la CA

Dans une logique de <strong>moindre privil√®ge</strong>, j‚Äôai modifi√© l‚Äôonglet <em>S√©curit√©</em> de la CA afin de d√©l√©guer uniquement les droits n√©cessaires au compte d√©di√© <code class="text-xs font-mono">adm-pki</code>.


<div style="background-color: var(--card-bg); border: 1px solid var(--card-border);" class="rounded-2xl p-6 my-10 overflow-hidden relative">
  <div class="absolute top-0 right-0 p-4 opacity-5 text-4xl"></div>
  <h4 style="color: var(--text-title);" class="text-sm font-bold mb-4 flex items-center gap-2">Permissions sur la CA : <code style="color: var(--text-purple);">adm-pki</code></h4>
  <div class="space-y-3">
    <div class="flex items-center justify-between p-3 bg-white/5 dark:bg-black/20 rounded-xl border border-white/5">
      <span class="text-xs" style="color: var(--text-main);">Lire / Consulter la configuration</span>
      <span class="text-[10px] font-bold text-green-500 bg-green-500/10 px-2 py-1 rounded">ACCORD√â</span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 dark:bg-black/20 rounded-xl border border-white/5">
      <span class="text-xs" style="color: var(--text-main);">G√©rer / √âmettre les certificats</span>
      <span class="text-[10px] font-bold text-green-500 bg-green-500/10 px-2 py-1 rounded">ACCORD√â</span>
    </div>
    <div class="flex items-center justify-between p-3 bg-white/5 dark:bg-black/20 rounded-xl border border-white/5 opacity-50">
      <span class="text-xs" style="color: var(--text-main);">G√©rer l'autorit√© de certification</span>
      <span class="text-[10px] font-bold text-red-500 bg-red-500/10 px-2 py-1 rounded font-mono italic">REFUS√â (Moindre privil√®ge)</span>
    </div>
  </div>
</div>

<div style="display: flex; justify-content: center; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 500px;">
    <img src="/images/projets/identity-security/ad-cs/droits-ca.png" alt="Droits du compte adm-pki sur la CA" class="rounded-lg w-full h-auto" />
  <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Le compte adm-pki dispose uniquement des droits n√©cessaires √† l'administration de la CA</p>
  </div>
</div>

<p class="mt-4">
Cette approche permet une s√©paration claire entre la d√©cision humaine et l‚Äôex√©cution technique, tout en √©vitant l‚Äôutilisation de comptes administrateurs g√©n√©riques.
</p>


<p class="mt-4" style="color: var(--text-main);">
  Enfin, j'ai v√©rifi√© la coh√©rence globale de la configuration et des descripteurs de s√©curit√© avec la commande <code style="color: var(--text-purple); background: var(--purple-border);" class="px-1.5 py-0.5 rounded text-[10px] font-mono">certutil</code>. Ce rapport d√©taill√© des permissions me permet de garantir l'absence de privil√®ges excessifs et de valider l'int√©grit√© de la racine de confiance.
</p>

<div class="my-10">
  <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-xl shadow-sm">
    <img src="/images/projets/identity-security/ad-cs/recap-droits-ca.png" alt="R√©sultat de la commande certutil -dump" class="rounded-lg w-full h-auto" />
  <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">V√©rification des descripteurs de s√©curit√© et des permissions globales via certutil</p>
  </div>
</div>

---

## üîç √âtape 4 : Activer l‚Äôaudit 

Une PKI sans journalisation fiable constitue un angle mort de s√©curit√©.  
J‚Äôactive donc l‚Äôaudit des √©v√©nements de l‚Äôautorit√© de certification en modifiant la GPO **DOM - S - Advanced_Auditing** pour activer l‚Äôoption " Auditer les services de certifications " :


Apr√®s application, la sous-cat√©gorie **Services de certification** passe bien en **Succ√®s et √âchec**, que l'on peut v√©rifier directement via powershell.

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/audit-cert.png" alt="Membres du groupe √âditeurs de certificats" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Auditer les succ√®s et √©checs.</p>
  </div>
  <div class="flex flex-col items-center">
    <img src="/images/projets/identity-security/ad-cs/audit-pwshell-ok.png" alt="Permissions de la CA" class="rounded-lg border border-white/10 shadow-md" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">V√©rification de l'audit avec la commande auditpol /get</p>
  </div>
</div>
---

## üß¨ √âtape 5 : V√©rifier la publication de la PKI dans Active Directory

M√™me sans cr√©er de mod√®le personnalis√©, une autorit√© de certification **Enterprise** publie automatiquement des informations dans l‚Äôannuaire.

J‚Äôutilise **ADSI Edit** pour v√©rifier que le **certificat de l‚Äôautorit√© de certification** est bien publi√© dans la partition de configuration d‚ÄôActive Directory.

Chemin observ√© :
`CN=Configuration ‚Üí CN=Services ‚Üí CN=Public Key Services ‚Üí CN=Certification Authorities`

La pr√©sence de cet objet confirme que :
- la CA est correctement int√©gr√©e √† Active Directory  
- les machines du domaine peuvent r√©cup√©rer le certificat racine automatiquement  
- la cha√Æne de confiance peut √™tre construite sans action manuelle

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 700px;">
    <img src="/images/projets/identity-security/ad-cs/cert-ad-inscrit.png" alt="Publication du certificat de la CA dans ADSI" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 8px; font-style: italic;">Le certificat de l‚Äôautorit√© de certification est bien publi√© dans Active Directory.</p>
  </div>
</div>

Cette v√©rification confirme que l‚Äôinfrastructure PKI est correctement ancr√©e dans l‚Äôannuaire avant de passer aux √©tapes suivantes.

---

## ‚úÖ √âtape 6 : V√©rifier la sant√© de la PKI

Pour terminer, j‚Äôutilise **PKIView (`pkiview.msc`)** afin de contr√¥ler :

- la hi√©rarchie de certification  
- la validit√© des certificats d‚Äôautorit√©  
- la disponibilit√© des points **AIA** et **CDP**

Tous les indicateurs sont au vert : la cha√Æne de confiance est fonctionnelle et les points de distribution sont accessibles.

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 450px;">
    <img src="/images/projets/identity-security/ad-cs/pki-ok.png" alt="PKIview" style="width: 130%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Emplacement AIA et CDP du certificat OK</p>
  </div>
</div>


---

## üß© √âtape 7 : V√©rification locale via la console MMC

Une fois la PKI valid√©e, je v√©rifie que le **certificat racine** est bien ancr√© dans le magasin de l‚Äôordinateur local. C'est ce qui permet au serveur (et plus tard aux clients) de faire confiance aux certificats √©mis.

### üîß Acc√®s au magasin syst√®me
Pour inspecter les certificats de l‚Äôordinateur local, j'utilise la console `mmc.exe` en ajoutant le composant logiciel enfichable **Certificats**.

<div class="grid grid-cols-2 md:grid-cols-4 gap-4 my-8">
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc1.png" alt="MMC 1" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">1. Lancer MMC</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc2.png" alt="MMC 2" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">2. Composants</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc3.png" alt="MMC 3" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">3. Compte Ordinateur</p>
  </div>
  <div class="space-y-2">
    <img src="/images/projets/identity-security/ad-cs/mmc4.png" alt="MMC 4" class="rounded-lg border border-slate-200 dark:border-white/10 shadow-sm" />
    <p class="text-[8px] text-center font-bold uppercase text-slate-500">4. Local</p>
  </div>
</div>

---

### üîç Validation du certificat racine

Dans le magasin <code class="text-xs font-mono">Autorit√©s de certification racines de confiance ‚Üí Certificats</code>, le certificat de mon autorit√© d‚Äôentreprise appara√Æt bien. 

Cette pr√©sence confirme que :
- La CA est reconnue par le syst√®me d'exploitation.
- Le certificat racine est approuv√© localement.
- La cha√Æne de confiance est pr√™te pour les services applicatifs (LDAPS, VPN, etc.).

<div class="my-10 flex flex-col items-center">
  <div class="p-2 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-2xl shadow-sm">
    <img src="/images/projets/identity-security/ad-cs/mmc5.png" alt="Certificat racine visible dans MMC" class="rounded-xl w-full max-w-3xl h-auto" />
  </div>
  <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Le certificat est bien pr√©sent et valide dans le magasin de confiance local.</p>
</div>

---

<section class="mt-16 space-y-12">
  
  <div style="background-color: var(--card-bg); border: 1px solid var(--card-border);" class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center rounded-2xl p-8 shadow-sm">
    <div>
      <h3 style="color: var(--text-title);" class="text-xl font-black mb-4 flex items-center gap-2">
        <span class="text-green-500 text-lg">‚úÖ</span> Bilan de l'√©tape : AD CS
      </h3>
      <ul class="space-y-3">
        <li class="flex items-start gap-3 text-sm" style="color: var(--text-main);">
          <span><strong>Confiance √©tablie :</strong> Racine <code style="color: var(--text-purple); background: var(--purple-border);" class="px-1 py-0.5 rounded">RSA 4096 / SHA512</code> d√©ploy√©e avec succ√®s.</span>
        </li>
        <li class="flex items-start gap-3 text-sm" style="color: var(--text-main);">
          <span><strong>S√©curit√© :</strong> R√¥les s√©par√©s entre machine et humain (Mod√®le RBAC).</span>
        </li>
        <li class="flex items-start gap-3 text-sm" style="color: var(--text-main);">
          <span><strong>Sant√© valid√©e :</strong> AIA/CDP op√©rationnels et certificat visible dans le magasin local.</span>
        </li>
      </ul>
    </div>
    
    <div style="border-color: var(--card-border);" class="flex justify-center border-t pt-8 md:border-t-0 md:border-l md:pl-8 md:pt-0">
        <div class="text-center">
          <div class="text-5xl mb-2 transition-transform hover:scale-110 duration-300">üìú</div>
          <p style="color: var(--text-title);" class="text-[10px] uppercase tracking-[0.2em] font-black opacity-60">Brique de confiance pr√™te</p>
          <p style="color: var(--text-muted);" class="text-[9px] mt-1 italic">Flux critiques √† s√©curiser</p>
        </div>
    </div>
  </div>

  <div class="max-w-2xl mx-auto text-center space-y-6 px-4">
    <p style="color: var(--text-main);" class="text-base leading-relaxed italic opacity-90">
      "La PKI interne est d√©sormais op√©rationnelle, segment√©e et audit√©e. Elle constitue la fondation n√©cessaire pour transformer notre annuaire en un service LDAPS chiffr√©."
    </p>
    
    <div style="background-color: var(--purple-border);" class="h-px w-24 mx-auto"></div>

    <div class="space-y-2">
      <p style="color: var(--text-muted);" class="text-sm">
        <strong>Objectif suivant :</strong> Activer le <strong>LDAPS</strong> pour s√©curiser les requ√™tes d'annuaire et prot√©ger les identifiants sur le r√©seau.
      </p>
    </div>
  </div>

</section>

<NextStep 
  href="/projets/ldaps" 
  title="Activer le LDAPS et s√©curiser les √©changes d'annuaire" 
/>