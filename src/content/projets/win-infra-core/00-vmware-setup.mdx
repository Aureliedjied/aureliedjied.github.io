---
title: "Virtualisation & Installation OS"
description: "Pr√©paration de l'environnement virtuel sous VMware et installation de Windows Server 2022."
tags: ["VMware", "Virtualisation", "Windows Server"]
pubDate: 2026-01-08
slug: "vmware-setup"
---

import SeriesStepper from '../../../components/SeriesStepper.astro';
import NextStep from '../../../components/NextStep.astro';
import { WIN_INFRA_CORE } from '../../../constants/series';

<SeriesStepper 
  seriesTitle="Fondations & S√©curit√© du Socle" 
  steps={WIN_INFRA_CORE} 
  currentStepIndex={0} 
/>

# Virtualisation & Pr√©paration de l'OS

Avant de configurer nos services, nous devons b√¢tir une machine virtuelle (VM) robuste et optimis√©e. Ce chapitre traite de la cr√©ation de l'h√¥te virtuel et de l'installation du syst√®me d'exploitation.

## üõ†Ô∏è Configuration de la machine virtuelle

Pour ce lab, j'utilise **VMware Workstation**. Le dimensionnement a √©t√© choisi pour √©quilibrer performances et √©conomie de ressources sur la machine h√¥te :

<div class="my-6">
  <ul>
    <li><strong>Processeur :</strong> <code>2 vCPUs</code></li>
    <li><strong>M√©moire vive :</strong> <code>4 Go de RAM</code></li>
    <li><strong>Stockage :</strong> 60 Go en mode Thin Provisioning</li>
  </ul>
</div>

<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/processeur.png" alt="Configuration CPU" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">2 vCPUs</p>
  </div>

  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/allouer-ram.png" alt="Configuration RAM" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">4 Go de RAM</p>
  </div>

  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/espace-disk.png" alt="Configuration Stockage" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">60 Go (Thin)</p>
  </div>
</div>

### üåê Configuration R√©seau (VMnet8)

Le serveur est plac√© sur le segment **NAT (VMnet8)**. Afin de coller aux exigences de s√©curit√© r√©elles, le plan d'adressage est strictement d√©fini :

<div class="my-6">
  <ul>
    <li><strong>Sous-r√©seau :</strong> <code>192.168.174.0/24</code></li>
    <li><strong>Passerelle :</strong> <code>192.168.174.2</code></li>
    <li><strong>Mode IP :</strong> Statique (Post-install)</li>
  </ul>
</div>

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 350px; flex: 1; min-width: 280px;">
    <img src="/images/projets/win-infra-core/vmware-setup/vmware-nat-no-dhcp.png" alt="D√©sactivation DHCP VMware" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Interface NAT : d√©sactivation du service DHCP</p>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center; max-width: 350px; flex: 1; min-width: 280px;">
    <img src="/images/projets/win-infra-core/vmware-setup/reseau-nat.png" alt="Configuration R√©seau NAT" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Plan d'adressage : Configuration du segment VMnet8</p>
  </div>
</div>

> üõ°Ô∏è **Hardening R√©seau** : En entreprise, on d√©sactive le DHCP sur les segments serveurs. Cela emp√™che l'attribution automatique d'IP √† des √©quipements non autoris√©s et garantit la stabilit√© des futurs services DNS.

---

## üíø Montage de l'ISO et Boot

L'installation s'appuie sur l'image ISO officielle de **Windows Server 2022**. 

Une fois l'ISO mont√©e, nous d√©marrons la VM. Lors de la cr√©ation, nous nommons l'inventaire VMware **`SRV-AD-01`** pour une organisation propre d√®s le d√©part.

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/renommer-serveur.png" alt="nommer le serveur" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Identification de la VM dans l'inventaire</p>
  </div>
</div>

---

## üñ•Ô∏è Installation de Windows Server 2022

J'ai s√©lectionn√© la version **Standard (Exp√©rience Bureau)**. 

> üí° **Pourquoi ce choix ?** Bien que la version "Core" soit plus s√©curis√©e, la version GUI est ici privil√©gi√©e pour faciliter la d√©monstration visuelle des outils d'administration AD.

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/experience-bureau.png" alt="experience-bureau" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">S√©lection de l'OS : Windows Server 2022 Standard Desktop Experience</p>
  </div>
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/installation.png" alt="Installation" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Processus d'installation de l'OS</p>
  </div>
</div>

### √âtapes post-installation :
1. **Mot de passe Administrateur** : D√©finition d'un mot de passe complexe pour le compte local initial.
2. **VMware Tools** : Installation des pilotes pour optimiser la fluidit√© et les performances de la machine.

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/mdp-admin-local.png" alt="Mot de passe" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">D√©finition du MDP Administrateur</p>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/vm-tools.png" alt="VMware Tools" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Optimisation via VMware Tools</p>
  </div>
</div>

---

<section style="margin-top: 3rem;">
    <h2 style="display: flex; align-items: center; gap: 12px; border-bottom: 1px solid rgba(128,128,128,0.2); padding-bottom: 10px;">
        üñ•Ô∏è D√©marrage et Nommage
    </h2>
    <p>
        Au d√©marrage, entrer le mot de passe du compte Administrateur local.
    </p>
    <p>
        Avant toute promotion ou installation de r√¥le, le serveur doit porter un nom d√©finitif et normalis√©. Pour ce contr√¥leur de domaine, j'ai choisi <code>SRV-AD-01</code>, un nom court respectant les conventions de nommage standards.
    </p>

    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 60px; margin: 3rem 0;">
        <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px; flex: 1; min-width: 280px;">
            <img src="/images/projets/win-infra-core/roles/open-admin.png" alt="Saisie mot de passe" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(128,128,128,0.2);" />
            <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 12px; font-style: italic;">Ouverture de session Administrateur local</p>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px; flex: 1; min-width: 280px;">
            <img src="/images/projets/win-infra-core/roles/renommer-ad.png" alt="Renommage serveur" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(128,128,128,0.2);" />
            <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 12px; font-style: italic;">Changement du nom d'h√¥te (Red√©marrage requis)</p>
        </div>
    </div>
</section>

### Configuration IP Statique
Le param√©trage DNS est l'√©tape la plus critique. Pour un premier DC, on pointe sur soi-m√™me. On peut acc√©der √† la configuration avec la commande ncpa.cpl.

<div class="grid grid-cols-1 md:grid-cols-2 gap-8 my-8 items-center">
  <div class="overflow-hidden rounded-lg border border-white/10">
    <table class="w-full text-sm text-left">
      <thead class="bg-white/5">
        <tr>
          <th class="p-3 border-b border-white/10">Param√®tre</th>
          <th class="p-3 border-b border-white/10">Valeur</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="p-3 border-b border-white/10 font-bold">Adresse IP</td>
          <td class="p-3 border-b border-white/10 text-blue-400">192.168.174.10</td>
        </tr>
        <tr>
          <td class="p-3 border-b border-white/10 font-bold">Masque</td>
          <td class="p-3 border-b border-white/10">255.255.255.0</td>
        </tr>
        <tr>
          <td class="p-3 border-b border-white/10 font-bold">Passerelle</td>
          <td class="p-3 border-b border-white/10">192.168.174.2</td>
        </tr>
        <tr>
          <td class="p-3 border-b border-white/10 font-bold">DNS Primaire</td>
          <td class="p-3 border-b border-white/10 text-green-400">192.168.174.10</td>
        </tr>
      </tbody>
    </table>
  </div>
   <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/roles/ipconf.png" alt="ncpa.cpl" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Configurer ip statique du r√©seau</p>
  </div>
</div>

---

## üõ†Ô∏è Installation des R√¥les (Pr√©-Promotion)

Via le **Gestionnaire de serveur**, j'installe les binaires n√©cessaires. Je ne lance pas encore la promotion pour m'assurer que les r√¥les sont correctement d√©ploy√©s.

<div class="flex flex-col items-center mb-8">
  <img src="/images/projets/win-infra-core/roles/ajouter-role.png" alt="Menu G√©rer" class="max-w-[500px] w-full rounded-lg border border-white/10" />
  <p class="text-[0.65rem] italic opacity-50 mt-2">Acc√®s √† l'assistant via le Gestionnaire de serveur</p>
</div>

### 1. AD DS (Active Directory Domain Services)
Le socle de l'annuaire permettant la gestion centralis√©e des identit√©s.

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/roles/ad-install.png" alt="S√©lection AD DS" class="rounded-lg border border-white/10 w-full" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">S√©lection du r√¥le AD DS</p>
  </div>
</div>

### 2. DNS Server
Essentiel pour la r√©solution des noms du domaine et la localisation des services via les enregistrements SRV.

<div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/roles/serveur-dns.png" alt="Installation DNS" class="rounded-lg border border-white/10 w-full" />
    <p class="text-[0.65rem] italic opacity-50 mt-2">Installation du r√¥le DNS</p>
  </div>
  <div class="flex flex-col items-center justify-center bg-white/5 rounded-lg border border-dashed border-white/20 p-4">
    <p class="text-sm text-center opacity-70">
      üí° <strong>Note :</strong> Le DNS est souvent install√© automatiquement lors de la promotion du premier DC si le r√¥le n'est pas d√©j√† pr√©sent.
    </p>
  </div>
</div>


<NextStep 
  title="Promotion du Contr√¥leur de Domaine" 
  description="Comment transformer ce serveur en une nouvelle for√™t Active Directory." 
  link="/projets/win-infra-core/promotion-domaine" 
/>

