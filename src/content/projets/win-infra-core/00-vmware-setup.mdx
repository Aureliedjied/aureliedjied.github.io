---
title: "Virtualisation & Installation OS"
description: "Pr√©paration de l'environnement virtuel sous VMware et installation de Windows Server 2022."
category: "windows"
tags: ["VMware", "Virtualisation", "Windows Server", "Installation"]
pubDate: 2026-01-13
slug: "vmware-setup"
---

import SeriesStepper from '../../../components/SeriesStepper.astro';
import NextStep from '../../../components/NextStep.astro';
import { WIN_INFRA_CORE } from '../../../constants/series';

<SeriesStepper 
  seriesTitle="Fondations & Mise en place" 
  steps={WIN_INFRA_CORE} 
  currentStepIndex={0} 
/>


Avant de configurer nos services, nous devons b√¢tir une machine virtuelle (VM) robuste et optimis√©e. Ce chapitre traite de la cr√©ation de l'h√¥te virtuel et de l'installation du syst√®me d'exploitation.

## üõ†Ô∏è Configuration de la machine virtuelle

Pour ce lab, j'utilise **VMware Workstation**. Le dimensionnement a √©t√© choisi pour √©quilibrer performances et √©conomie de ressources sur la machine h√¥te :

<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 my-8">
  <div class="bg-white/5 border border-white/10 rounded-lg p-4 text-center">
    <span class="block text-xs uppercase tracking-widest opacity-50 mb-1">Calcul du processeur</span>
    <code class="text-blue-400 font-bold">2 vCPUs</code>
  </div>
  <div class="bg-white/5 border border-white/10 rounded-lg p-4 text-center">
    <span class="block text-xs uppercase tracking-widest opacity-50 mb-1">M√©moire vive</span>
    <code class="text-blue-400 font-bold">4 Go RAM</code>
  </div>
  <div class="bg-white/5 border border-white/10 rounded-lg p-4 text-center">
    <span class="block text-xs uppercase tracking-widest opacity-50 mb-1">Stockage</span>
    <code class="text-blue-400 font-bold">60 Go (Thin)</code>
  </div>
</div>

<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 my-8">
  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/processeur.png" alt="Configuration CPU" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">2 vCPUs</p>
  </div>

  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/allouer-ram.png" alt="Configuration RAM" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">4 Go de RAM</p>
  </div>

  <div class="flex flex-col items-center">
    <img src="/images/projets/win-infra-core/vmware-setup/espace-disk.png" alt="Configuration Stockage" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">60 Go (Thin)</p>
  </div>
</div>

### üåê Configuration R√©seau (VMnet8)

Le serveur est plac√© sur le segment **NAT (VMnet8)**. Afin de coller aux exigences de s√©curit√© r√©elles, le plan d'adressage est strictement d√©fini :

<div class="my-6">
  <ul>
    <li><strong>Sous-r√©seau :</strong> <code>192.168.174.0/24</code></li>
    <li><strong>Passerelle :</strong> <code>192.168.174.2</code></li>
    <li><strong>Mode IP :</strong> Statique (Post-install)</li>
  </ul>
</div>

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 350px; flex: 1; min-width: 280px;">
    <img src="/images/projets/win-infra-core/vmware-setup/vmware-nat-no-dhcp.png" alt="D√©sactivation DHCP VMware" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Interface NAT : d√©sactivation du service DHCP</p>
  </div>

  <div style="display: flex; flex-direction: column; align-items: center; max-width: 350px; flex: 1; min-width: 280px;">
    <img src="/images/projets/win-infra-core/vmware-setup/reseau-nat.png" alt="Configuration R√©seau NAT" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Plan d'adressage : Configuration du segment VMnet8</p>
  </div>
</div>

> üõ°Ô∏è Dans certains environnements s√©curis√©s, le DHCP est d√©sactiv√© sur les segments serveurs afin d‚Äôimposer un adressage statique ma√Ætris√©

---

## üíø Montage de l'ISO et Boot

L'installation s'appuie sur l'image ISO officielle de **Windows Server 2022**. 

Une fois l'ISO mont√©e, nous d√©marrons la VM. Lors de la cr√©ation, nous nommons la VM dans l‚Äôinventaire VMware SRV-AD-01 pour garder une coh√©rence, mais le nom du syst√®me Windows sera modifi√© apr√®s installation

<div style="display: flex; justify-content: center; margin: 2rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/renommer-serveur.png" alt="nommer le serveur" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Identification de la VM dans l'inventaire</p>
  </div>
</div>

---

## üñ•Ô∏è Installation de Windows Server 2022

J'ai s√©lectionn√© la version **Standard (Exp√©rience Bureau)**. 

> üí° **Pourquoi ce choix ?** Bien que la version "Core" soit plus s√©curis√©e, la version GUI est ici privil√©gi√©e pour faciliter la d√©monstration visuelle des outils d'administration AD.

<div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px; margin: 3rem 0;">
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/experience-bureau.png" alt="experience-bureau" style="width: 100%; height: auto; border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">S√©lection de l'OS : Windows Server 2022 Standard Desktop Experience</p>
  </div>
  <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px;">
    <img src="/images/projets/win-infra-core/vmware-setup/installation.png" alt="Installation" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);" />
    <p style="font-size: 0.65rem; text-align: center; opacity: 0.5; margin-top: 8px; font-style: italic;">Processus d'installation de l'OS</p>
  </div>
</div>

### √âtapes post-installation :
<div class="space-y-6 my-8">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="bg-white/5 border border-white/10 p-5 rounded-xl">
      <div class="flex items-center gap-3 mb-2">
        <span class="bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs font-bold">01</span>
        <h4 class="font-bold text-white text-sm">Mot de passe Administrateur</h4>
      </div>
      <p class="text-xs opacity-70 leading-relaxed">
        D√©finition d'un secret complexe. Ce compte local sera remplac√© par des acc√®s nominaux apr√®s la promotion du domaine.
      </p>
    </div>

    <div class="bg-white/5 border border-white/10 p-5 rounded-xl">
      <div class="flex items-center gap-3 mb-2">
        <span class="bg-blue-500/20 text-blue-400 px-2 py-1 rounded text-xs font-bold">02</span>
        <h4 class="font-bold text-white text-sm">VMware Tools</h4>
      </div>
      <p class="text-xs opacity-70 leading-relaxed">
        Installation des pilotes pour l'optimisation des performances graphiques et la gestion du r√©seau virtuel.
      </p>
    </div>
  </div>

  <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6">
    <figure class="flex flex-col items-center">
      <img src="/images/projets/win-infra-core/vmware-setup/mdp-admin-local.png" alt="Mot de passe" class="w-full h-auto rounded-lg border border-white/10 shadow-lg" />
      <figcaption class="text-[0.65rem] text-center opacity-50 mt-3 italic">D√©finition du MDP Administrateur</figcaption>
    </figure>

    <figure class="flex flex-col items-center">
      <img src="/images/projets/win-infra-core/vmware-setup/vm-tools.png" alt="VMware Tools" class="w-full h-auto rounded-lg border border-white/10 shadow-lg" />
      <figcaption class="text-[0.65rem] text-center opacity-50 mt-3 italic">Optimisation via VMware Tools</figcaption>
    </figure>
  </div>
</div>
---

<section style="margin-top: 3rem;">
    <h2 style="display: flex; align-items: center; gap: 12px; border-bottom: 1px solid rgba(128,128,128,0.2); padding-bottom: 10px;">
        üñ•Ô∏è D√©marrage et Nommage
    </h2>
    <p>
        Au d√©marrage, entrer le mot de passe du compte Administrateur local.
    </p>
    <p>
        Avant toute promotion ou installation de r√¥le, le serveur doit porter un nom d√©finitif et normalis√©. Pour ce contr√¥leur de domaine, j'ai choisi <code>SRV-AD-01</code>, un nom court respectant les conventions de nommage standards.
    </p>

    <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 60px; margin: 3rem 0;">
        <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px; flex: 1; min-width: 280px;">
            <img src="/images/projets/win-infra-core/roles/open-admin.png" alt="Saisie mot de passe" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(128,128,128,0.2);" />
            <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 12px; font-style: italic;">Ouverture de session Administrateur local</p>
        </div>
        <div style="display: flex; flex-direction: column; align-items: center; max-width: 400px; flex: 1; min-width: 280px;">
            <img src="/images/projets/win-infra-core/roles/renommer-ad.png" alt="Renommage serveur" style="width: 100%; height: auto; border-radius: 8px; border: 1px solid rgba(128,128,128,0.2);" />
            <p style="font-size: 0.7rem; text-align: center; opacity: 0.6; margin-top: 12px; font-style: italic;">Changement du nom d'h√¥te (Red√©marrage requis)</p>
        </div>
    </div>
</section>

### Configuration IP Statique
Le param√©trage DNS est l'√©tape la plus critique. Pour un premier DC, on pointe sur soi-m√™me. Aucun DNS public n‚Äôest configur√© directement dans la carte r√©seau. La r√©solution Internet sera g√©r√©e plus tard via des redirecteurs DNS configur√©s sur le serveur.
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8 my-8 items-center">
  <div class="overflow-hidden rounded-xl border border-white/10 bg-white/5">
    <table class="w-full text-sm">
      <thead class="bg-white/10">
        <tr>
          <th class="p-4 text-left">Param√®tre</th>
          <th class="p-4 text-left">Valeur</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-white/10">
        <tr><td class="p-4 font-bold">Nom d'h√¥te</td><td class="p-4">SRV-AD-01</td></tr>
        <tr><td class="p-4 font-bold text-blue-400">Adresse IP</td><td class="p-4">192.168.174.10</td></tr>
        <tr><td class="p-4 font-bold">Passerelle</td><td class="p-4">192.168.174.2</td></tr>
        <tr><td class="p-4 font-bold text-green-400">DNS Primaire</td><td class="p-4">192.168.174.10</td></tr>
      </tbody>
    </table>
  </div>
  <img src="/images/projets/win-infra-core/roles/ipconf.png" alt="Configuration IP" class="rounded-lg border border-white/10" />
</div>

---

## üõ†Ô∏è Installation des R√¥les (Pr√©-Promotion)

Via le **Gestionnaire de serveur**, j'installe les binaires n√©cessaires. Cette √©tape s√©pare l'installation logicielle de la configuration logique (promotion), une bonne pratique pour isoler d'√©ventuels probl√®mes de d√©ploiement.

<div class="flex flex-col items-center my-10">
  <div class="max-w-2xl w-full">
    <img src="/images/projets/win-infra-core/roles/ajouter-role.png" alt="Menu G√©rer" class="rounded-xl border border-white/10 shadow-2xl" />
    <p class="text-[0.65rem] italic opacity-50 mt-3 text-center text-balance">Lancement de l'assistant "Ajouter des r√¥les et fonctionnalit√©s" depuis le Dashboard.</p>
  </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8 my-12">
  <div class="space-y-4">
    <div class="flex items-center gap-3">
      <div class="bg-blue-500/20 text-blue-400 p-2 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M7 8h10"/><path d="M7 12h10"/><path d="M7 16h10"/></svg>
      </div>
      <h3 class="text-lg font-bold">1. AD DS</h3>
    </div>
    <p class="text-sm opacity-70 leading-relaxed">
      Installation des <strong>Active Directory Domain Services</strong>. C'est le socle qui permet la gestion centralis√©e des identit√©s et des strat√©gies de s√©curit√© (GPO).
    </p>
    <figure>
      <img src="/images/projets/win-infra-core/roles/ad-install.png" alt="S√©lection AD DS" class="rounded-lg border border-white/10 w-full shadow-md" />
      <figcaption class="text-[10px] uppercase tracking-widest opacity-40 mt-2 text-center">Binaires AD DS</figcaption>
    </figure>
  </div>

  <div class="space-y-4">
    <div class="flex items-center gap-3">
      <div class="bg-green-500/20 text-green-400 p-2 rounded-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
      </div>
      <h3 class="text-lg font-bold">2. DNS Server</h3>
    </div>
    <p class="text-sm opacity-70 leading-relaxed">
      Le service <strong>DNS</strong> est indispensable pour localiser les services du domaine (enregistrements SRV). Sans lui, l'authentification Kerberos est impossible.
    </p>
    <figure>
      <img src="/images/projets/win-infra-core/roles/serveur-dns.png" alt="Installation DNS" class="rounded-lg border border-white/10 w-full shadow-md" />
      <figcaption class="text-[10px] uppercase tracking-widest opacity-40 mt-2 text-center">Binaires DNS Server</figcaption>
    </figure>
  </div>
</div>

<div class="bg-blue-500/5 border border-blue-500/20 rounded-xl p-6 my-8">
  <div class="flex items-start gap-4">
    <span class="text-xl">üí°</span>
    <p class="text-sm opacity-80 leading-relaxed">
      <strong>Note technique :</strong> Bien que l'assistant de promotion puisse installer le DNS automatiquement, l'installer manuellement au pr√©alable permet de valider la configuration IP et la connectivit√© avant de complexifier l'infrastructure.
    </p>
  </div>
</div>

<section class="mt-16 space-y-12">
  
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center bg-white/5 border border-white/10 rounded-2xl p-8">
    <div>
      <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
        <span class="text-green-400">‚úÖ</span> Bilan de l'√©tape 01
      </h3>
      <ul class="space-y-3">
        <li class="flex items-start gap-3 text-sm opacity-80">
          <span class="text-blue-400 font-bold">‚Ä¢</span>
          <span><strong>Environnement ma√Ætris√© :</strong> VM dimensionn√©e et isol√©e sur VMnet8.</span>
        </li>
        <li class="flex items-start gap-3 text-sm opacity-80">
          <span class="text-blue-400 font-bold">‚Ä¢</span>
          <span><strong>Identit√© fix√©e :</strong> Nommage <code>SRV-AD-01</code> et IP statique configur√©s.</span>
        </li>
        <li class="flex items-start gap-3 text-sm opacity-80">
          <span class="text-blue-400 font-bold">‚Ä¢</span>
          <span><strong>Pr√™t pour l'AD :</strong> R√¥les AD DS et DNS install√©s (binaires uniquement).</span>
        </li>
      </ul>
    </div>
    
    <div class="hidden md:flex justify-center border-l border-white/10 pl-8">
       <div class="text-center">
          <div class="text-4xl mb-2">üöÄ</div>
          <p class="text-[10px] uppercase tracking-tighter opacity-40 font-bold">Pr√™t pour l'√©l√©vation</p>
       </div>
    </div>
  </div>

  <div class="max-w-2xl mx-auto text-center space-y-4">
    <p class="text-base leading-relaxed opacity-90 italic">
      "L'installation n'est que la premi√®re couche. Avant de promouvoir ce serveur, nous allons appliquer un durcissement (Hardening) rigoureux."
    </p>
    <p class="text-sm opacity-60">
      Objectif : R√©duire la surface d'attaque et supprimer les protocoles h√©rit√©s (LLMNR, NetBIOS) avant que le serveur ne devienne le c≈ìur de l'infrastructure.
    </p>
  </div>

</section>

<NextStep 
  href="/projets/promotion-domaine" 
  title="Hardening et Promotion du DC" 
/>

