---
interface Step {
  label: string;
  href: string;
}

interface Props {
  steps: Step[];
  currentStepIndex: number;
  seriesTitle: string;
}

const { steps, currentStepIndex, seriesTitle } = Astro.props;
---

<nav class="my-8 w-full" aria-label="Progression du labo">
  <div class="mb-3 px-1">
    <h4 class="text-[10px] uppercase tracking-[0.2em] font-black opacity-40 dark:text-white">
      {seriesTitle}
    </h4>
  </div>

  <div class="-mx-4 px-4 sm:-mx-6 sm:px-6 lg:-mx-8 lg:px-8 overflow-x-auto no-scrollbar touch-pan-x">
    <div class="flex flex-nowrap gap-3 pb-4">
      {steps.map((step, index) => {
        const isCurrent = index === currentStepIndex;
        return (
          <a 
            href={step.href}
            class={`flex items-center gap-3 px-4 py-2 rounded-lg border transition-all duration-300 shrink-0 min-w-fit sm:snap-start ${
              isCurrent 
                ? "bg-purple-600 border-purple-500 text-white shadow-lg shadow-purple-500/20" 
                : "bg-white dark:bg-[#1a1a1a] border-gray-200 dark:border-white/5 text-gray-800 dark:text-white/60 hover:border-purple-500 hover:text-purple-600"
            }`}
          >
            <span class={`font-mono text-[10px] font-bold ${isCurrent ? "text-purple-200" : "text-gray-300 dark:text-white/20"}`}>
              {String(index + 1).padStart(2, '0')}
            </span>
            <span class="text-[12px] sm:text-sm font-bold whitespace-nowrap">
              {step.label}
            </span>
          </a>
        )
      })}
      
      <div aria-hidden="true" class="shrink-0 w-6 sm:w-10 h-1"></div>
    </div>
  </div>
</nav>

<style>
  .no-scrollbar::-webkit-scrollbar { display: none; }
  .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>