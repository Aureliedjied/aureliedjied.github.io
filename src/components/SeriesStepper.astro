---
interface Step {
  label: string;
  href: string;
}

interface Props {
  steps: Step[];
  currentStepIndex: number;
  seriesTitle: string;
}

const { steps, currentStepIndex, seriesTitle } = Astro.props;
---

<nav class="my-8" aria-label="Progression du labo">
  <div class="flex items-center justify-between mb-4 px-1">
    <div class="flex flex-col">
      <h4 class="text-white font-bold text-xl leading-none">{seriesTitle}</h4>
    </div>
    <span class="text-sm font-mono text-zinc-500 bg-zinc-900/50 px-3 py-1 rounded-full border border-white/5">
      {currentStepIndex + 1} / {steps.length}
    </span>
  </div>

  <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
    {steps.map((step, index) => {
      const isCurrent = index === currentStepIndex;
      
      return (
        <a 
          href={step.href}
          class={`group relative p-3 rounded-xl border transition-all duration-300 flex flex-col justify-center min-h-[60px] ${
            isCurrent 
              ? "bg-purple-600/20 border-purple-500 shadow-[0_0_15px_rgba(168,85,247,0.1)] ring-1 ring-purple-500/30" 
              : "bg-zinc-900/40 border-white/5 hover:border-white/20 hover:bg-zinc-800/50"
          }`}
        >
          <div class="flex items-center gap-3">
            <span class={`text-sm font-black font-mono ${isCurrent ? "text-purple-400" : "text-zinc-600"}`}>
              {index + 1}
            </span>
            
            <span class={`text-sm md:text-base font-bold leading-tight ${isCurrent ? "text-white" : "text-zinc-400 group-hover:text-zinc-200"}`}>
              {step.label}
            </span>
          </div>

          {isCurrent && (
            <div class="absolute bottom-0 left-0 h-1 bg-purple-500 rounded-b-xl w-full"></div>
          )}
        </a>
      )
    })}
  </div>
</nav>