---
interface Step {
  label: string;
  href: string;
}

interface Props {
  steps: Step[];
  currentStepIndex: number;
  seriesTitle: string;
}

const { steps, currentStepIndex, seriesTitle } = Astro.props;
---

<nav class="my-8" aria-label="Progression du labo">
  <div class="flex items-center justify-between mb-4 px-1">
    <div class="flex flex-col">
      <h4 class="font-bold text-xl leading-none" style="color: var(--text-title);">{seriesTitle}</h4>
    </div>
    <span class="text-sm font-mono px-3 py-1 rounded-full border transition-colors duration-300" 
          style="color: var(--text-main); background-color: var(--card-bg); border-color: var(--card-border);">
      {currentStepIndex + 1} / {steps.length}
    </span>
  </div>

  <div class="grid grid-cols-2 lg:grid-cols-4 gap-3">
    {steps.map((step, index) => {
      const isCurrent = index === currentStepIndex;
      
      return (
        <a 
          href={step.href}
          class={`group relative p-3 rounded-xl border transition-all duration-300 flex flex-col justify-center min-h-[60px] ${
            isCurrent 
              ? "bg-purple-600/10 border-purple-500 shadow-[0_0_15px_rgba(168,85,247,0.1)] ring-1 ring-purple-500/30" 
              : "hover:bg-purple-500/5"
          }`}
          style={!isCurrent ? "background-color: var(--card-bg); border-color: var(--card-border);" : ""}
        >
          <div class="flex items-center gap-3">
            <span class={`text-sm font-black font-mono ${isCurrent ? "text-purple-500" : "opacity-40"}`}
                  style={!isCurrent ? "color: var(--text-main);" : ""}>
              {index + 1}
            </span>
            
            <span class={`text-sm md:text-base font-bold leading-tight ${isCurrent ? "text-purple-600 dark:text-white" : "group-hover:text-purple-500"}`}
                  style={!isCurrent ? "color: var(--text-main);" : ""}>
              {step.label}
            </span>
          </div>

          {isCurrent && (
            <div class="absolute bottom-0 left-0 h-1 bg-purple-500 rounded-b-xl w-full"></div>
          )}
        </a>
      )
    })}
  </div>
</nav>